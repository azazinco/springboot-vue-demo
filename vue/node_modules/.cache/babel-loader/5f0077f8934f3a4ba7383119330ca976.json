{"remainingRequest":"E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\ideaWorkspace\\springboot-vue-practice\\vue\\src\\views\\File.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ideaWorkspace\\springboot-vue-practice\\vue\\src\\views\\File.vue","mtime":1653110651975},{"path":"E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650794055925},{"path":"E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1650794058243},{"path":"E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650794055925},{"path":"E:\\ideaWorkspace\\springboot-vue-practice\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1650794060272}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmlsZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIG5hbWU6ICcnLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWw6IDAKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmVxdWVzdC5nZXQoIi9maWxlcyIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgc2VhcmNoOiB0aGlzLm5hbWUKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlRW5hYmxlOiBmdW5jdGlvbiBjaGFuZ2VFbmFibGUocm93KSB7Ly8gdGhpcy5yZXF1ZXN0LnBvc3QoIi9maWxlL3VwZGF0ZSIsIHJvdykudGhlbihyZXMgPT4gewogICAgICAvLyAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsKICAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIikKICAgICAgLy8gICB9CiAgICAgIC8vIH0pCiAgICB9LAogICAgZGVsOiBmdW5jdGlvbiBkZWwoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXF1ZXN0LmRlbGV0ZSgiL2ZpbGVzLyIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMjAwJykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwoKICAgICAgICAgIF90aGlzMi5sb2FkKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcigi5Yig6Zmk5aSx6LSlIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbDsKICAgIH0sCiAgICBkZWxCYXRjaDogZnVuY3Rpb24gZGVsQmF0Y2goKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGlkcyA9IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYuaWQ7CiAgICAgIH0pOyAvL1t7fSx7fSx7fV0gPT4gWzEsMiwzXQoKICAgICAgcmVxdWVzdC5wb3N0KCIvZmlsZXMvYmF0Y2gvZGVsZXRlIiwgaWRzKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygi5om56YeP5Yig6Zmk5oiQ5YqfIik7CgogICAgICAgICAgX3RoaXMzLmxvYWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLmVycm9yKCLmibnph4/liKDpmaTlpLHotKUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5uYW1lID0gIiI7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UocGFnZVNpemUpIHsKICAgICAgY29uc29sZS5sb2cocGFnZVNpemUpOwogICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZU51bSkgewogICAgICBjb25zb2xlLmxvZyhwYWdlTnVtKTsKICAgICAgdGhpcy5wYWdlTnVtID0gcGFnZU51bTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlRmlsZVVwbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZUZpbGVVcGxvYWRTdWNjZXNzKHJlcykgewogICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkuIrkvKDmiJDlip8iKTsKICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLHotKUiKTsKICAgICAgfQoKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgZG93bmxvYWQ6IGZ1bmN0aW9uIGRvd25sb2FkKHVybCkgewogICAgICB3aW5kb3cub3Blbih1cmwpOwogICAgfSwKICAgIHByZXZpZXc6IGZ1bmN0aW9uIHByZXZpZXcodXJsKSB7CiAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2ZpbGUua2VraW5nLmNuL29ubGluZVByZXZpZXc/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmJ0b2EodXJsKSkpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["E:\\ideaWorkspace\\springboot-vue-practice\\vue\\src\\views\\File.vue"],"names":[],"mappings":";;AAoFA,OAAO,OAAP,MAAoB,iBAApB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,MADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,SAAS,EAAE,EADN;AAEL,MAAA,IAAI,EAAE,EAFD;AAGL,MAAA,iBAAiB,EAAE,EAHd;AAIL,MAAA,OAAO,EAAE,CAJJ;AAKL,MAAA,QAAQ,EAAE,EALL;AAML,MAAA,KAAK,EAAE;AANF,KAAP;AAQD,GAXY;AAYb,EAAA,OAZa,qBAYH;AACR,SAAK,IAAL;AACD,GAdY;AAeb,EAAA,OAAO,EAAE;AACP,IAAA,IADO,kBACA;AAAA;;AACL,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB;AACpB,QAAA,MAAM,EAAE;AACN,UAAA,OAAO,EAAE,KAAK,OADR;AAEN,UAAA,QAAQ,EAAE,KAAK,QAFT;AAGN,UAAA,MAAM,EAAE,KAAK;AAHP;AADY,OAAtB,EAMG,IANH,CAMQ,UAAA,GAAE,EAAK;AAEb,QAAA,KAAI,CAAC,SAAL,GAAiB,GAAG,CAAC,IAAJ,CAAS,OAA1B;AACA,QAAA,KAAI,CAAC,KAAL,GAAa,GAAG,CAAC,IAAJ,CAAS,KAAtB;AAED,OAXD;AAYD,KAdM;AAeP,IAAA,YAfO,wBAeM,GAfN,EAeW,CAChB;AACA;AACA;AACA;AACA;AACD,KArBM;AAsBP,IAAA,GAtBO,eAsBH,EAtBG,EAsBC;AAAA;;AACN,MAAA,OAAO,CAAC,MAAR,CAAe,YAAY,EAA3B,EAA+B,IAA/B,CAAoC,UAAA,GAAE,EAAK;AACzC,YAAI,GAAG,CAAC,IAAJ,KAAa,KAAjB,EAAwB;AACtB,UAAA,MAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,MAAtB;;AACA,UAAA,MAAI,CAAC,IAAL;AACF,SAHA,MAGO;AACL,UAAA,MAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,MAApB;AACF;AACD,OAPD;AAQD,KA/BM;AAgCP,IAAA,qBAhCO,iCAgCe,GAhCf,EAgCoB;AACzB,WAAK,iBAAL,GAAyB,GAAzB;AACD,KAlCM;AAmCP,IAAA,QAnCO,sBAmCI;AAAA;;AACT,UAAI,GAAE,GAAI,KAAK,iBAAL,CAAuB,GAAvB,CAA2B,UAAA,CAAA;AAAA,eAAK,CAAC,CAAC,EAAP;AAAA,OAA3B,CAAV,CADS,CACwC;;AACjD,MAAA,OAAO,CAAC,IAAR,CAAa,qBAAb,EAAoC,GAApC,EAAyC,IAAzC,CAA8C,UAAA,GAAE,EAAK;AACnD,YAAI,GAAG,CAAC,IAAJ,KAAa,KAAjB,EAAwB;AACtB,UAAA,MAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,QAAtB;;AACA,UAAA,MAAI,CAAC,IAAL;AACF,SAHA,MAGO;AACL,UAAA,MAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,QAApB;AACF;AACD,OAPD;AAQD,KA7CM;AA8CP,IAAA,KA9CO,mBA8CC;AACN,WAAK,IAAL,GAAY,EAAZ;AACA,WAAK,IAAL;AACD,KAjDM;AAkDP,IAAA,gBAlDO,4BAkDU,QAlDV,EAkDoB;AACzB,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,WAAK,QAAL,GAAgB,QAAhB;AACA,WAAK,IAAL;AACD,KAtDM;AAuDP,IAAA,mBAvDO,+BAuDa,OAvDb,EAuDsB;AAC3B,MAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACA,WAAK,OAAL,GAAe,OAAf;AACA,WAAK,IAAL;AACD,KA3DM;AA4DP,IAAA,uBA5DO,mCA4DiB,GA5DjB,EA4DsB;AAC3B,UAAI,GAAG,CAAC,IAAJ,KAAa,KAAjB,EAAwB;AACtB,aAAK,QAAL,CAAc,OAAd,CAAsB,MAAtB;AACA,aAAK,IAAL;AACF,OAHA,MAGO;AACL,aAAK,QAAL,CAAc,KAAd,CAAoB,MAApB;AACF;;AACA,WAAK,IAAL;AACD,KApEM;AAqEP,IAAA,QArEO,oBAqEE,GArEF,EAqEO;AACZ,MAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;AACD,KAvEM;AAwEP,IAAA,OAxEO,mBAwEC,GAxED,EAwEM;AACX,MAAA,MAAM,CAAC,IAAP,CAAY,8CAA8C,kBAAkB,CAAC,MAAM,CAAC,IAAP,CAAa,GAAb,CAAD,CAA5E;AACF;AA1EO;AAfI,CAAf","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"margin: 10px 0\">\r\n      <el-input style=\"width: 200px\" placeholder=\"请输入名称\" suffix-icon=\"el-icon-search\" v-model=\"name\"></el-input>\r\n      <el-button class=\"ml-5\" type=\"primary\" @click=\"load\">搜索</el-button>\r\n      <el-button type=\"warning\" @click=\"reset\">重置</el-button>\r\n    </div>\r\n    <div style=\"margin: 10px 0\">\r\n      <el-upload action=\"http://localhost:9090/files/upload\" :show-file-list=\"false\"\r\n                 :on-success=\"handleFileUploadSuccess\" style=\"display: inline-block\">\r\n        <el-button type=\"primary\" class=\"ml-5\">上传文件 <i class=\"el-icon-top\"></i></el-button>\r\n      </el-upload>\r\n      <el-popconfirm\r\n          class=\"ml-5\"\r\n          confirm-button-text='确定'\r\n          cancel-button-text='我再想想'\r\n          icon=\"el-icon-info\"\r\n          icon-color=\"red\"\r\n          title=\"您确定批量删除这些数据吗？\"\r\n          @confirm=\"delBatch\"\r\n      >\r\n        <template #reference>\r\n          <el-button type=\"danger\">批量删除</el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n\r\n    </div>\r\n    <el-table :data=\"tableData\" border stripe :header-cell-class-name=\"'headerBg'\"\r\n              @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"文件名称\"></el-table-column>\r\n      <el-table-column prop=\"type\" label=\"文件类型\"></el-table-column>\r\n      <el-table-column prop=\"size\" label=\"文件大小(kb)\"></el-table-column>\r\n      <el-table-column label=\"预览\">\r\n        <template v-slot=\"scope\">\r\n          <el-button type=\"primary\" @click=\"preview(scope.row.url)\">预览</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"下载\">\r\n        <template v-slot=\"scope\">\r\n          <el-button type=\"primary\" @click=\"download(scope.row.url)\">下载</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"启用\">\r\n        <template v-slot=\"scope\">\r\n          <el-switch v-model=\"scope.row.enable\" active-color=\"#13ce66\" inactive-color=\"#ccc\"\r\n                     @change=\"changeEnable(scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template v-slot=\"scope\">\r\n          <el-popconfirm\r\n              class=\"ml-5\"\r\n              confirm-button-text='确定'\r\n              cancel-button-text='我再想想'\r\n              icon=\"el-icon-info\"\r\n              icon-color=\"red\"\r\n              title=\"您确定删除吗？\"\r\n              @confirm=\"del(scope.row.id)\"\r\n          >\r\n            <template #reference>\r\n              <el-button type=\"danger\">删除 <i class=\"el-icon-remove-outline\"></i></el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div style=\"padding: 10px 0\">\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[2, 5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"File\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      name: '',\r\n      multipleSelection: [],\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      total: 0\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    load() {\r\n      request.get(\"/files\", {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          search: this.name,\r\n        }\r\n      }).then(res => {\r\n\r\n        this.tableData = res.data.records\r\n        this.total = res.data.total\r\n\r\n      })\r\n    },\r\n    changeEnable(row) {\r\n      // this.request.post(\"/file/update\", row).then(res => {\r\n      //   if (res.code === '200') {\r\n      //     this.$message.success(\"操作成功\")\r\n      //   }\r\n      // })\r\n    },\r\n    del(id) {\r\n      request.delete(\"/files/\" + id).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"删除成功\")\r\n          this.load()\r\n        } else {\r\n          this.$message.error(\"删除失败\")\r\n        }\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val\r\n    },\r\n    delBatch() {\r\n      let ids = this.multipleSelection.map(v => v.id); //[{},{},{}] => [1,2,3]\r\n      request.post(\"/files/batch/delete\", ids).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"批量删除成功\")\r\n          this.load()\r\n        } else {\r\n          this.$message.error(\"批量删除失败\")\r\n        }\r\n      })\r\n    },\r\n    reset() {\r\n      this.name = \"\"\r\n      this.load()\r\n    },\r\n    handleSizeChange(pageSize) {\r\n      console.log(pageSize)\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      console.log(pageNum)\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    handleFileUploadSuccess(res) {\r\n      if (res.code === '200') {\r\n        this.$message.success(\"上传成功\")\r\n        this.load()\r\n      } else {\r\n        this.$message.error(\"上传失败\")\r\n      }\r\n      this.load()\r\n    },\r\n    download(url) {\r\n      window.open(url)\r\n    },\r\n    preview(url) {\r\n      window.open('https://file.keking.cn/onlinePreview?url=' + encodeURIComponent(window.btoa((url))))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":""}]}